{"version":3,"file":"component---src-pages-user-pin-jsx-b2816335f1ef2be6a2d0.js","mappings":"oPA+EA,UAtEa,WACT,IAAMA,GAAOC,EAAAA,EAAAA,KACPC,EAAOC,EAAAA,OAAa,MAC1B,EAAwBA,EAAAA,SAAe,GAAhCC,EAAP,KAAaC,EAAb,KACMC,EAAQ,SAACC,GACXA,EAAEC,iBACE,UAAUC,KAAKP,EAAKQ,QAAQC,OAAOC,OACnCP,EAAQ,GAERQ,MAAM,2BAERC,EAAU,SAACC,GAC2B,IAAD,EAAnCA,IAAQb,EAAKQ,QAAQC,OAAOC,OAC5BP,EAAQ,GACRW,EAAAA,EAAAA,KAAU,YAAa,CACnBC,QAAQ,UAAAf,EAAKQ,QAAQQ,cAAb,eAAqBN,QAAS,KACtCO,OAAQjB,EAAKQ,QAAQC,OAAOC,QAC7BQ,MAAK,WACJP,MAAM,sBACNQ,EAAAA,EAAAA,UAAS,qBACVC,OAAM,SAAAC,GAAM,IAAD,EACVV,OAAM,UAAAU,EAAEC,gBAAF,eAAYC,KAAKC,UAAWH,EAAEG,SACpCrB,EAAQ,OAGZQ,MAAM,8BAGd,OACI,gBAAC,IAAD,CAAOY,KAAMzB,IACR,kBACG,gCACI,gBAAC,IAAD,MACA,wBAAM2B,SAAUrB,EAAMsB,IAAK1B,GACvB,gBAAC,IAAD,KACI,gBAAC,IAAD,KACI,gBAAC,IAAD,KACI,gBAAC,EAAA2B,KAAD,CAAMC,MAAM,UAAUC,GAAG,kBAAzB,mBAGA,gBAAC,IAAD,CAAYD,MAAM,eAAlB,wBAIP9B,EAAKgC,SAASC,SAAW,gBAAC,IAAD,CAAUC,MAAO,CAAEC,cAAe,WACxD,gBAAC,IAAD,CAAYC,MAAM,SAASC,QAAQ,MAAnC,qBACA,gBAAC,IAAD,CAAWC,KAAK,WAAWC,KAAK,SAASC,WAAY,CAAEC,UAAW,UAAWP,MAAO,CAAEQ,UAAW,UAAYC,UAAW,GACpHC,WAAS,KAEjB,gBAAC,IAAD,CAAUV,MAAO,CAAEC,cAAe,WAC9B,gBAAC,IAAD,CAAYC,MAAM,SAASC,QAAQ,MAAnC,qBACA,gBAAC,IAAD,CAAWC,KAAK,WAAWC,KAAK,SAASC,WAAY,CAAEC,UAAW,UAAWP,MAAO,CAAEQ,UAAW,UAAYC,UAAW,GACpHC,WAAS,KAEjB,gBAAC,IAAD,KACI,gBAAC,IAAD,CAAQN,KAAK,SAASD,QAAQ,YAAYP,MAAM,UAAUc,WAAS,GAAnE,aAMZ,gBAAC,IAAD,CAAWC,KAAMzC,GAAQ,EAAG0C,WAAqB,IAAT1C,EACpCsB,QAAQ,sBACRqB,SAAUjC,EAAQkC,QAAS,kBAAM3C,EAAQ","sources":["webpack://mainapp/./src/pages/user/pin.jsx"],"sourcesContent":["import * as React from \"react\";\nimport { useUserInfo } from \"shared/components/save\";\nimport Defer from \"shared/components/ui/Defer\";\nimport ajax from 'shared/components/ajax';\nimport Navbar from \"shared/components/ui/Navbar\";\nimport { Breadcrumbs, Button, List, ListItem, TextField, Typography } from \"@material-ui/core\";\nimport { Link, navigate } from \"gatsby\";\nimport PinPrompt from \"shared/components/ui/market/PinPrompt\";\n\nconst Page = () => {\n    const user = useUserInfo();\n    const form = React.useRef(null);\n    const [page, setPage] = React.useState(0);\n    const save = ((e) => {\n        e.preventDefault();\n        if (/^\\d{6}$/.test(form.current.newpin.value))\n            setPage(1);\n        else\n            alert('Pin baru harus 6 digit');\n    });\n    const submit = ((pin) => {\n        if (pin === form.current.newpin.value) {\n            setPage(2);\n            ajax.post('/auth/pin', {\n                oldPin: form.current.oldpin?.value || null,\n                newPin: form.current.newpin.value,\n            }).then(() => {\n                alert('Berhasil disimpan');\n                navigate('/user/profile/');\n            }).catch(x => {\n                alert(x.response?.data.message || x.message);\n                setPage(0);\n            })\n        } else {\n            alert('Konfirmasi pin tidak sama');\n        }\n    });\n    return (\n        <Defer data={user}>\n            {() => (\n                <>\n                    <Navbar />\n                    <form onSubmit={save} ref={form}>\n                        <List>\n                            <ListItem>\n                                <Breadcrumbs>\n                                    <Link color=\"inherit\" to=\"/user/profile/\">\n                                        Pengaturan Akun\n                                    </Link>\n                                    <Typography color=\"textPrimary\">Atur PIN Transaksi</Typography>\n                                </Breadcrumbs>\n                            </ListItem>\n\n                            {user.features.billing && <ListItem style={{ flexDirection: 'column' }}>\n                                <Typography align=\"center\" variant=\"h6\">Masukkan PIN Lama</Typography>\n                                <TextField type=\"password\" name='oldpin' inputProps={{ inputMode: 'numeric', style: { textAlign: 'center' }, maxLength: 6 }}\n                                    fullWidth />\n                            </ListItem>}\n                            <ListItem style={{ flexDirection: 'column' }}>\n                                <Typography align=\"center\" variant=\"h6\">Masukkan PIN Baru</Typography>\n                                <TextField type=\"password\" name='newpin' inputProps={{ inputMode: 'numeric', style: { textAlign: 'center' }, maxLength: 6 }}\n                                    fullWidth />\n                            </ListItem>\n                            <ListItem>\n                                <Button type='submit' variant=\"contained\" color=\"primary\" fullWidth>\n                                    Simpan\n                                </Button>\n                            </ListItem>\n                        </List>\n                    </form>\n                    <PinPrompt open={page >= 1} submitting={page === 2}\n                        message=\"Konfirmasi PIN Baru\"\n                        onAction={submit} onClose={() => setPage(0)} />\n                </>\n            )}\n        </Defer>\n    );\n}\n\nexport default Page;\n"],"names":["user","useUserInfo","form","React","page","setPage","save","e","preventDefault","test","current","newpin","value","alert","submit","pin","ajax","oldPin","oldpin","newPin","then","navigate","catch","x","response","data","message","onSubmit","ref","Link","color","to","features","billing","style","flexDirection","align","variant","type","name","inputProps","inputMode","textAlign","maxLength","fullWidth","open","submitting","onAction","onClose"],"sourceRoot":""}